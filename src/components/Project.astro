---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;

// Render the markdown description using Astro's content collection rendering
const { Content } = await project.render();
---

<div class="relative flex flex-col md:flex-row justify-between items-start group">
  <div class="flex flex-col z-10 sm:max-w-88 md:max-w-[24rem] xl:max-w-lg">
    <div class="flex flex-row gap-2 items-center mb-1">
      <h3 class="text-xl font-semibold">{project.data.title}</h3>
      <div class="flex gap-2 sm:opacity-0 sm:group-hover:opacity-100 sm:group-focus:opacity-100 transition-opacity sm:visible sm:group-hover:not-sr-only sm:group-focus:not-sr-only">
        {project.data.github && (
          <a href={project.data.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub Repository" class="hover-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436c.55.096.756-.233.756-.522c0-.262-.013-1.128-.013-2.049c-2.764.509-3.479-.674-3.699-1.292c-.124-.317-.66-1.293-1.127-1.554c-.385-.207-.936-.715-.014-.729c.866-.014 1.485.797 1.691 1.128c.99 1.663 2.571 1.196 3.204.907c.096-.715.385-1.196.701-1.471c-2.448-.275-5.005-1.224-5.005-5.432c0-1.196.426-2.186 1.128-2.956c-.111-.275-.496-1.402.11-2.915c0 0 .921-.288 3.024 1.128a10.2 10.2 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371c2.104-1.43 3.025-1.128 3.025-1.128c.605 1.513.221 2.64.111 2.915c.701.77 1.127 1.747 1.127 2.956c0 4.222-2.571 5.157-5.019 5.432c.399.344.743 1.004.743 2.035c0 1.471-.014 2.654-.014 3.025c0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11"/></svg>
          </a>
        )}
        {project.data.gif && (
          <a href={project.data.gif} target="_blank" rel="noopener noreferrer" aria-label="Gif" class="hover-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M11.75 15q.325 0 .538-.213t.212-.537v-4.5q0-.325-.213-.537T11.75 9t-.537.213T11 9.75v4.5q0 .325.213.538t.537.212M7 15h2q.425 0 .713-.288T10 14v-1.25q0-.325-.213-.537T9.25 12t-.537.213t-.213.537v.75h-1v-3h1.75q.325 0 .538-.213T10 9.75t-.213-.537T9.25 9H7q-.425 0-.712.288T6 10v4q0 .425.288.713T7 15m7.75 0q.325 0 .538-.213t.212-.537V13h1.25q.325 0 .538-.213t.212-.537t-.213-.537t-.537-.213H15.5v-1h2.25q.325 0 .538-.213t.212-.537t-.213-.537T17.75 9h-3q-.325 0-.537.213T14 9.75v4.5q0 .325.213.538t.537.212M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zm0 0V5z"/></svg>
          </a>
        )}
        {project.data.youtube && (
          <a href={project.data.youtube} target="_blank" rel="noopener noreferrer" aria-label="Youtube" class="hover-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m10 15l5.19-3L10 9zm11.56-7.83c.13.47.22 1.1.28 1.9c.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83c-.25.9-.83 1.48-1.73 1.73c-.47.13-1.33.22-2.65.28c-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44c-.9-.25-1.48-.83-1.73-1.73c-.13-.47-.22-1.1-.28-1.9c-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83c.25-.9.83-1.48 1.73-1.73c.47-.13 1.33-.22 2.65-.28c1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44c.9.25 1.48.83 1.73 1.73"/></svg>
          </a>
        )}
        {project.data.playstore && (
          <a href={project.data.playstore} target="_blank" rel="noopener noreferrer" aria-label="Youtube" class="hover-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M11.576 5.56a2515 2515 0 0 0-5.79-3.118a1.86 1.86 0 0 0-1.28-.214a1.54 1.54 0 0 0-.915.61c-.235.328-.341.735-.341 1.18V19.84c0 .388.076.797.288 1.14c.228.369.6.636 1.083.68a1 1 0 0 0 .17-.003c.35.001.682-.111.99-.279l.11-.059l.615-.333a5749 5749 0 0 0 12.265-6.648l.85-.463l1.085-.587l.073-.038l.026-.014l.018-.01c.321-.168.765-.528.893-1.074a1.26 1.26 0 0 0-.149-.942c-.17-.286-.437-.5-.741-.661l-.008-.004a498 498 0 0 1-3.917-2.125a1 1 0 0 0-.128-.055l-1.523-.823zm2.131 5.29L8.311 5.505l2.553 1.377l3.673 1.982l.753.406zM4.75 19.784V4.086l7.896 7.824zm10.026-7.877l1.907-1.896c1.787.975 3.152 1.716 3.441 1.866l.022.012l-.018.01c-.155.08-.974.525-2.147 1.163l-1.309.712zm-6.367 6.346l5.304-5.287l1.581 1.557a5153 5153 0 0 1-6.885 3.73" clip-rule="evenodd"/></svg>
          </a>
        )}
      </div>
    </div>

    <p class="text-lg text-gray-400">{project.data.description}</p>
    
    <details class="sm:opacity-0 text-gray-400 sm:group-hover:opacity-100 transition-opacity">
      <summary class="w-fit cursor-pointer text-blue-600 hover:text-blue-800 focus:outline-none">
        More
      </summary>
      {project.data.tags && project.data.tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mt-2">
          {project.data.tags.map(tag => (
            <span class="px-1 py-0.5 bg-gray-400 text-gray-800 text-sm rounded-md transition-colors duration-200 hover:bg-gray-300 cursor-default">
              {tag}
            </span>
          ))}
        </div>
      )}
      <div class="prose mt-2">
        <Content />
      </div>
    </details>
  </div>

  <div class="
      relative sm:absolute
      right-0 lg:-right-10 xl:-right-60
      sm:-top-22 lg:-top-28 xl:-top-34
      w-full sm:w-[20rem] lg:w-[24rem] xl:w-md
      my-1 sm:mt-5
      z-20
      sm:opacity-0 group-hover:opacity-100 group-focus:opacity-100
      sm:translate-y-[20px] sm:group-hover:animate-fade-up sm:group-hover:animate-duration-[200ms]
      transition-all pointer-events-none
    ">
    <Image src={project.data.image} alt={project.data.title} class="rounded-xl object-cover" style="color:transparent" />
  </div>
</div>